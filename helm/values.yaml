# Default values for voting-app

# Image configuration
images:
  frontend:
    repository: frontend
    tag: "0.5.0"
    pullPolicy: IfNotPresent

  api:
    repository: api
    tag: "0.3.2"
    pullPolicy: IfNotPresent

  consumer:
    repository: consumer
    tag: "0.3.0"
    pullPolicy: IfNotPresent

# Frontend configuration
frontend:
  replicas: 1
  resources:
    requests:
      memory: "128Mi"
      cpu: "100m"
    limits:
      memory: "256Mi"
      cpu: "200m"

# API configuration
api:
  replicas: 1
  resources:
    requests:
      memory: "256Mi"
      cpu: "200m"
    limits:
      memory: "512Mi"
      cpu: "500m"

# Consumer configuration
consumer:
  replicas: 1
  streamName: "votes"
  consumerGroup: "vote-processors"
  batchSize: 10
  blockMs: 5000
  maxRetries: 3
  logLevel: "INFO"
  resources:
    requests:
      memory: "256Mi"
      cpu: "200m"
    limits:
      memory: "512Mi"
      cpu: "500m"

# Database configuration (placeholders)
redis:
  url: "redis://redis.voting-data.svc.cluster.local:6379"

postgresql:
  url: "postgresql://postgres:postgres@postgres.voting-data.svc.cluster.local:5432/votes"

# Secrets configuration
# SECURITY: Set create: false in production and manage secrets externally
secrets:
  create: true  # Set to false to use external secret management
  postgres:
    user: "postgres"
    password: "postgres"  # CHANGE IN PRODUCTION
  redis:
    password: ""  # Empty for no auth (development only)

# Network Policies configuration
# SECURITY: NetworkPolicy enforcement requires CNI support (Calico, Cilium, Weave)
networkPolicies:
  enabled: false  # Set to true to enable NetworkPolicy enforcement
  # CNI detection (for documentation purposes)
  cni: calico  # Options: calico, cilium, weave
  # Policy strategy
  defaultDeny: true  # Default deny all ingress
  allowDNS: true     # Allow all pods to reach kube-dns
